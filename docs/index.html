<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stacker - Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        nav {
            background: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        nav a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: #764ba2;
        }
        
        main {
            background: white;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        section {
            margin-bottom: 3rem;
        }
        
        h2 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e0e0e0;
        }
        
        h3 {
            color: #764ba2;
            font-size: 1.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        
        h4 {
            color: #555;
            font-size: 1.2rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        
        code {
            background: #f4f4f4;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #667eea;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .button-group {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .button {
            background: #28a745;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 500;
            display: inline-block;
        }
        
        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .author-info {
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        ol {
            margin-left: 2rem;
            margin-top: 0.5rem;
        }
        
        ul {
            margin-left: 2rem;
            margin-top: 0.5rem;
        }
        
        li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Stacker</h1>
            <p class="subtitle">Stratigraphic Forward Model for Shallow-Water Carbonates</p>
        </div>
    </header>
    
    <nav>
        <div class="container">
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#installation">Installation</a></li>
                <li><a href="#running">Running</a></li>
                <li><a href="#parameters">Parameters</a></li>
                <li><a href="#workflow">Workflow</a></li>
                <li><a href="#author">Author</a></li>
            </ul>
        </div>
    </nav>
    
    <main class="container">
        <section id="overview">
            <h2>Overview</h2>
            <p>Stacker is a numerical forward model designed to explore Walther's Law and simulate the migration of facies patches in shallow-water carbonate environments. The model provides insights into stratigraphic architecture through forward modeling of sediment deposition, facies distribution, and environmental changes over geological time.</p>
            
            <div class="info">
                <strong>Key Features:</strong>
                <ul>
                    <li>Simulation of facies belt and facies mosaic models</li>
                    <li>Configurable sediment production models (Constant or Bosscher & Schlager)</li>
                    <li>Support for multiple facies with distinct deposition rates and characteristics</li>
                    <li>Integration of subsidence and sea-level changes</li>
                    <li>Advanced visualization and analysis tools</li>
                    <li>GUI-based operation for ease of use</li>
                </ul>
            </div>
        </section>

        <section id="disclaimer">
            <h2>Disclaimer</h2>
            <p>
            The manual pages https://mindthegap-erc.github.io/Stacker/ have been generated based on the code using an LLM and reviewed by the author and the maintainers. The latter take responsibility for the contents.
            </p>
        </section>
        
        <section id="installation">
            <h2>Installation & Requirements</h2>
            
            <h3>Prerequisites</h3>
            <ul>
                <li><strong>MATLAB:</strong> R2018b or later recommended</li>
                <li><strong>Required Toolboxes:</strong> None (uses core MATLAB functionality)</li>
                <li><strong>Operating System:</strong> Windows, macOS, or Linux</li>
            </ul>
            
            <h3>Installation Steps</h3>
            <ol>
                <li>Clone or download the Stacker repository</li>
                <li>Add the Stacker directory to your MATLAB path</li>
                <li>Ensure all parameter files are in the <code>parameters/</code> subdirectory</li>
                <li>Verify initial bathymetry and sea-level curve files are accessible</li>
            </ol>
            
            <pre><code>% In MATLAB, add Stacker to your path:
addpath('/path/to/stacker')
addpath('/path/to/stacker/parameters')</code></pre>
        </section>
        
        <section id="running">
            <h2>Running Stacker</h2>
            
            <h3>Starting the Application</h3>
            <p>Launch Stacker from the MATLAB command window:</p>
            <pre><code>% Start Stacker GUI
stacker</code></pre>
            
            <div class="success">
                <strong>GUI Interface:</strong> The Stacker GUI will open with control buttons on the right side and a visualization area on the left. The interface is designed for intuitive, step-by-step model execution.
            </div>
            
            <h3>Basic Workflow</h3>
            <div class="button-group">
                <span class="button">1. Load Parameter File</span>
                <span class="button">2. Initialize Model</span>
                <span class="button">3. Run Model</span>
                <span class="button">4. Plot Results</span>
            </div>
            
            <h4>Default Configuration</h4>
            <p>By default, Stacker looks for:</p>
            <ul>
                <li><strong>Parameter Path:</strong> <code>parameters/</code></li>
                <li><strong>Parameter File:</strong> <code>stackerFaciesMosaic.txt</code></li>
            </ul>
            
            <div class="warning">
                <strong>Important:</strong> Parameter files must be properly formatted and all referenced files (bathymetry, sea-level curves, cloud point files) must exist in their specified locations.
            </div>
        </section>
        
        <section id="parameters">
            <h2>Parameter Reference</h2>
            
            <h3>Main Model Parameters</h3>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>modelName</code></td>
                        <td>String</td>
                        <td>Identifier for the model run</td>
                        <td>FaciesMosaic</td>
                    </tr>
                    <tr>
                        <td><code>gridCellsX</code></td>
                        <td>Integer</td>
                        <td>Number of grid cells in X dimension</td>
                        <td>100</td>
                    </tr>
                    <tr>
                        <td><code>gridCellsY</code></td>
                        <td>Integer</td>
                        <td>Number of grid cells in Y dimension</td>
                        <td>100</td>
                    </tr>
                    <tr>
                        <td><code>gridDx</code></td>
                        <td>Float</td>
                        <td>Grid cell spacing in X (km)</td>
                        <td>0.1</td>
                    </tr>
                    <tr>
                        <td><code>gridDy</code></td>
                        <td>Float</td>
                        <td>Grid cell spacing in Y (km)</td>
                        <td>0.1</td>
                    </tr>
                    <tr>
                        <td><code>totalEMT</code></td>
                        <td>Float</td>
                        <td>Total model duration (My)</td>
                        <td>1.0</td>
                    </tr>
                    <tr>
                        <td><code>deltaT</code></td>
                        <td>Float</td>
                        <td>Model time step (My)</td>
                        <td>0.001</td>
                    </tr>
                    <tr>
                        <td><code>subsidenceRate</code></td>
                        <td>Float</td>
                        <td>Subsidence rate (m/My)</td>
                        <td>20.0</td>
                    </tr>
                    <tr>
                        <td><code>intertdidalWDRange</code></td>
                        <td>Float</td>
                        <td>Tidal range (meters)</td>
                        <td>1.0</td>
                    </tr>
                    <tr>
                        <td><code>nFacies</code></td>
                        <td>Integer</td>
                        <td>Number of facies types</td>
                        <td>5</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>File References</h3>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                        <th>Format</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>initialBathymetryFname</code></td>
                        <td>Initial topography/bathymetry file</td>
                        <td>ASCII matrix</td>
                    </tr>
                    <tr>
                        <td><code>sealevelCurveFname</code></td>
                        <td>Sea-level curve through time</td>
                        <td>ASCII vector</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Facies Parameters</h3>
            <p>For each facies, specify:</p>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>deposRate</code></td>
                        <td>Float</td>
                        <td>Maximum deposition rate (m/My)</td>
                    </tr>
                    <tr>
                        <td><code>faciesRGB</code></td>
                        <td>Float[3]</td>
                        <td>RGB color code for visualization (0-1 scale)</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Model Types</h3>
            <h4>FaciesBelts Model</h4>
            <p>Deterministic depth-controlled facies distribution.</p>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>minWaterDepth</code></td>
                        <td>Minimum water depth for facies occurrence</td>
                    </tr>
                    <tr>
                        <td><code>maxWaterDepth</code></td>
                        <td>Maximum water depth for facies occurrence</td>
                    </tr>
                </tbody>
            </table>
            
            <h4>FaciesMosaic Model</h4>
            <p>Stochastic facies patches with migration.</p>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>nFaciesMosaicElements</code></td>
                        <td>Number of facies mosaic elements</td>
                    </tr>
                    <tr>
                        <td><code>nFaciesMosaicNumberOfCloudPoints</code></td>
                        <td>Number of XY points per element</td>
                    </tr>
                    <tr>
                        <td><code>faciesMosaicElementMovementType</code></td>
                        <td>Migration type: RandomWalk, StraightLines, DeepestNeighbour, SteepestDescent</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Facies Mosaic Element Parameters</h3>
            <p>For each mosaic element:</p>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>faciesCode</code></td>
                        <td>Integer</td>
                        <td>Associated facies type (1-5)</td>
                    </tr>
                    <tr>
                        <td><code>migrationRateX</code></td>
                        <td>Float</td>
                        <td>Maximum migration rate in X (km/iteration)</td>
                    </tr>
                    <tr>
                        <td><code>migrationRateY</code></td>
                        <td>Float</td>
                        <td>Maximum migration rate in Y (km/iteration)</td>
                    </tr>
                    <tr>
                        <td><code>startX</code></td>
                        <td>Float</td>
                        <td>Initial X coordinate of centroid (km)</td>
                    </tr>
                    <tr>
                        <td><code>startY</code></td>
                        <td>Float</td>
                        <td>Initial Y coordinate of centroid (km)</td>
                    </tr>
                    <tr>
                        <td><code>radius</code></td>
                        <td>Float</td>
                        <td>Element radius (km)</td>
                    </tr>
                    <tr>
                        <td><code>cloudFilename</code></td>
                        <td>String</td>
                        <td>MATLAB .mat file with point cloud coordinates</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Sediment Production Models</h3>
            <ul>
                <li><strong>Constant:</strong> Uniform production rate independent of water depth</li>
                <li><strong>Bosscher&Schlager:</strong> Depth-dependent production following the Bosscher & Schlager (1992) curve</li>
            </ul>
        </section>
        
        <section id="workflow">
            <h2>Detailed Workflow</h2>
            
            <h3>Step 1: Load Parameter File</h3>
            <ol>
                <li>Set the parameter file path (default: <code>parameters/</code>)</li>
                <li>Set the parameter filename (default: <code>stackerFaciesMosaic.txt</code>)</li>
                <li>Click <strong>"Load parameter file"</strong></li>
                <li>Verify console output confirms successful loading</li>
            </ol>
            
            <div class="info">
                <strong>Console Output Example:</strong><br>
                <code>Read parameters file for model FaciesMosaic type FaciesMosaic to run for 1000 iterations for 1.00 My with 5 facies on a 100 by 100 cell grid</code>
            </div>
            
            <h3>Step 2: Initialize Model</h3>
            <ol>
                <li>Click <strong>"Initialise model"</strong></li>
                <li>The model arrays are allocated in memory</li>
                <li>Initial bathymetry is plotted in the main window</li>
                <li>Random number generator is seeded (seed: 42) for reproducibility</li>
            </ol>
            
            <h3>Step 3: Run Model</h3>
            <ol>
                <li>Click <strong>"Run model"</strong> to execute the simulation</li>
                <li>Progress is displayed in the console</li>
                <li>Simulation iterates through all time steps</li>
            </ol>
            
            <div class="warning">
                <strong>Note:</strong> Model execution time depends on grid size and number of iterations. For a 100×100 grid with 1000 iterations, expect several minutes of computation.
            </div>
            
            <h3>Step 4: Plot Model Results</h3>
            <ol>
                <li>Click <strong>"Plot model results"</strong></li>
                <li>Multiple visualization windows display:
                    <ul>
                        <li>Final bathymetry and facies distribution</li>
                        <li>Stratigraphic cross-sections</li>
                        <li>Chronostratigraphic diagrams</li>
                        <li>Thickness maps</li>
                    </ul>
                </li>
            </ol>
            
            <h3>Optional: Analysis Tools</h3>
            <p>Additional analysis functions (commented out in GUI but available):</p>
            <ul>
                <li><strong>Analyse model output:</strong> Calculate bed thickness distributions and stratigraphic order metrics</li>
                <li><strong>Run and plot animation:</strong> Generate animated visualization during model execution</li>
                <li><strong>Plot cross-section animation:</strong> Create GIF animation of traverse through model</li>
                <li><strong>Plot correlation panel animation:</strong> Generate animated correlation panels</li>
            </ul>
            
            <h3>Clearing Results</h3>
            <p>Click <strong>"Clear results"</strong> to reset all model variables and start fresh.</p>
        </section>
        
        <section id="example">
            <h2>Example Parameter File</h2>
            <p>Below is a minimal example of a parameter file structure:</p>
            
            <pre><code>FaciesMosaic                    # Model name
100                             # Grid cells X
100                             # Grid cells Y
0.1                             # Grid spacing X (km)
0.1                             # Grid spacing Y (km)
1.000                           # Model duration (My)
0.001                           # Time step (My)
parameters/initialTopography.txt  # Initial bathymetry file
20.0                            # Subsidence rate (m/My)
parameters/sealevelCurve.txt    # Sea-level curve file
1.0                             # Tidal range (m)
5                               # Number of facies

# Facies 1
1                               # Facies code
5000.0                          # Max deposition rate (m/My)
1 0.498 0.314                   # RGB color

# Facies 2
2
1000.0
1 1 0

# ... (continue for all facies)

FaciesMosaic                    # Model type
Constant                        # Production model
5                               # Number of mosaic elements
500                             # Points per element
RandomWalk                      # Migration type

# Mosaic Element 1
1                               # Element number
5                               # Facies code
0.5 0.5                         # Migration rates (km/iteration)
2.5 2.5                         # Initial position (km)
2.4                             # Radius (km)
parameters/cloud1.mat           # Cloud point file

# ... (continue for all elements)</code></pre>
        </section>
        
        <section id="author">
            <h2>Author & Licensing</h2>
            
            <h3>Author</h3>
            <p><strong>Peter Burgess</strong><br>
            University of Liverpool<br>
            ORCID: <a href="https://orcid.org/0000-0002-3812-4231" target="_blank">0000-0002-3812-4231</a></p>
            
            <h3>Repository Maintenance</h3>
            <p><strong>Emilia Jarochowska</strong><br>
            Utrecht University<br>
            ORCID: <a href="https://orcid.org/0000-0001-8937-9405" target="_blank">0000-0001-8937-9405</a></p>
            
            <p><strong>Xianyi Liu</strong><br>
            Utrecht University<br>
            ORCID: <a href="https://orcid.org/0000-0002-3851-116X" target="_blank">0000-0002-3851-116X</a></p>
            
            <h3>License</h3>
            <p><strong>Apache 2.0 License</strong><br>
            Copyright © 2024-2025 University of Liverpool</p>
            
            <div class="info">
                See the LICENSE file in the repository for full license text.
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <p>&copy; 2024-2025 University of Liverpool | Stacker Documentation</p>
            <p class="author-info">Written by P. Burgess | Latest updates May 2023</p>
        </div>
    </footer>
</body>
</html>